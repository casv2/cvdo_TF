Model GAP_4b, Test surface-decohesion-100-unrelaxed
Test run at 2018-09-03 18:54

model file: ../../../models/Ti/GAP_4b/model.py
============================================================
import os

from quippy import Potential
import __builtin__

orig_dir = os.getcwd()
model_dir = os.path.dirname(__file__)
if model_dir != '':
    os.chdir(model_dir)

if os.path.exists('gp_iter6_sparse9k.xml.sparseX.GAP_2017_6_17_60_4_3_56_1651.bz2'):
    os.system('bunzip2 gp_iter6_sparse9k.xml.sparseX.GAP_2017_6_17_60_4_3_56_1651.bz2')

try:
    if hasattr(__builtin__, 'mpi_glob'):
        calculator = Potential(init_args='Potential xml_label="GAP_2018_6_26_60_20_15_36_820"',
                                               param_filename='gp_4b_no_wire_surface.xml', mpi_obj=mpi_glob)
    else:
        calculator = Potential(init_args='Potential xml_label="GAP_2018_6_26_60_20_15_36_820"',
                                               param_filename='gp_4b_no_wire_surface.xml')
    Potential.__str__ = lambda self: '<GAP Potential>'
finally:
    os.chdir(orig_dir)

no_checkpoint = True

name = 'GAP'
============================================================
test file: ../../../tests/Ti/surface-decohesion-100-unrelaxed/test.py
============================================================
# This script defines a test case which computes one or more physical
# properties with a given model
#
# INPUTS: 
#   model.calculator -- an ase.calculator.Calculator instance
#     this script can assume the calculator is checkpointed.
#
# OUTPUTS:
#   properties -- dictionary of key/value pairs corresponding
#     to physical quantities computed by this test

# standard ASE structure generation routines
from ase.lattice.cubic import BodyCenteredCubic

# set of utility routines specific this this model/testing framework
from utilities import relax_atoms, relax_atoms_cell

# the current model
import model 

a0 = 3.16 # initial guess at lattice constant, cell will be relaxed below
fmax = 0.01 # maximum force following relaxtion [eV/A]

# set up the a
bulk = BodyCenteredCubic(symbol='W', latticeconstant=a0)

# specify that we will use model.calculator to compute forces, energies and stresses
bulk.set_calculator(model.calculator)

# use one of the routines from utilities module to relax the initial
# unit cell and atomic positions
bulk = relax_atoms_cell(bulk, tol=fmax, traj_file=None)

# set up supercell
bulk *= (5, 1, 1)

def surface_energy(bulk, opening):
    Nat = bulk.get_number_of_atoms()

    # relax atom positions, holding cell fixed
    # vac = relax_atoms(vac, fmax=fmax)

    # compute surface formation energy as difference of bulk and expanded cell
    ebulk = bulk.get_potential_energy()
    print 'bulk cell energy', ebulk

    bulk.cell[0,:] += [opening,0.0,0.0]
    eexp  = bulk.get_potential_energy()
    
    print 'expanded cell energy', eexp
    e_form = (eexp - ebulk) / (bulk.cell[1,1]*bulk.cell[2,2])
    print 'unrelaxed 100 surface formation energy', e_form
    return e_form

# dictionary of computed properties - this is output of this test, to
#   be compared with other models
n_steps = 35
max_opening = 3.5

openings = []
es = []
for i in range(n_steps + 1):
    opening = float(i)/float(n_steps)*max_opening
    openings.append(opening)
    bulk_copy = bulk.copy()
    bulk_copy.set_calculator(model.calculator)
    es.append(surface_energy(bulk_copy, opening))

print "openings ", openings
print "es ", es
from scipy import interpolate
spline = interpolate.splrep(openings, es, s=0)
stresses = [x for x in interpolate.splev(openings, spline, der=1)]

print "stresses ", stresses
properties = {'surface_decohesion_unrelaxed_opening': openings, 'surface_decohesion_unrelaxed_energy' : es, 'surface_decohesion_unrelaxed_stress' : stresses}

============================================================
relax_atoms_cell using method lbfgs_precon
WARNING:ase.optimize.precon:use_pyamg=True but PyAMG cannot be imported! falling back on direct inversion of preconditioner, may be slow for large systems
PreconLBFGS:   0  18:54:59      -12.475547       0.0000       0.0479
INFO:ase.optimize.precon:estimate_nearest_neighbour_distance(): calling neighbour_list with r_cut=1.00 A
INFO:ase.optimize.precon:estimate_nearest_neighbour_distance(): calling neighbour_list with r_cut=1.62 A
INFO:ase.optimize.precon:estimate_nearest_neighbour_distance(): calling neighbour_list with r_cut=2.62 A
INFO:ase.optimize.precon:estimate_nearest_neighbour_distance(): calling neighbour_list with r_cut=4.24 A
INFO:ase.optimize.precon:estimate_nearest_neighbour_distance(): got r_NN=2.737 in 0.0016918182373 s
INFO:ase.optimize.precon:creating sparse precon: initial_assembly=True, force_stab=False, apply_positions=True, apply_cell=True
INFO:ase.optimize.precon:--- neighbour list created in 0.000195026397705 s ---
INFO:ase.optimize.precon:adding stabilisation to preconditioner
INFO:ase.optimize.precon:--- computed triplet format in 0.000214099884033 s ---
INFO:ase.optimize.precon:--- remove zeros in 8.29696655273e-05 s ---
INFO:ase.optimize.precon:--- created CSC matrix in 0.00112915039062 s ---
INFO:ase.optimize.precon:--- N-dim precon created in 0.00123906135559 s ---
INFO:ase.optimize.precon:estimate_mu(): mu=1.0689304176913852, mu_c=93.34461595589764
INFO:ase.optimize.precon:creating sparse precon: initial_assembly=False, force_stab=False, apply_positions=True, apply_cell=True
INFO:ase.optimize.precon:--- neighbour list created in 0.000196933746338 s ---
INFO:ase.optimize.precon:adding stabilisation to preconditioner
INFO:ase.optimize.precon:--- computed triplet format in 0.000164985656738 s ---
INFO:ase.optimize.precon:--- applied fixed_atoms in 6.60419464111e-05 s ---
INFO:ase.optimize.precon:--- remove zeros in 6.00814819336e-05 s ---
INFO:ase.optimize.precon:--- created CSC matrix in 0.000627040863037 s ---
INFO:ase.optimize.precon:--- N-dim precon created in 0.000955104827881 s ---
INFO:ase.optimize.precon:--- Precon created in 0.00285911560059 seconds ---
INFO:ase.optimize.precon:--- Precon applied in 0.000317096710205 seconds ---
INFO:ase.utils.linesearcharmijo:a1 = 1.000, suff_dec = True
PreconLBFGS:   1  18:55:00      -12.484748       0.0000       0.0000
bulk cell energy -62.423741895
expanded cell energy -62.423741895
unrelaxed 100 surface formation energy 0.0
bulk cell energy -62.423741895
expanded cell energy -62.3456703562
unrelaxed 100 surface formation energy 0.0077555190533936565
bulk cell energy -62.423741895
expanded cell energy -62.1520566802
unrelaxed 100 surface formation energy 0.02698883474559013
bulk cell energy -62.423741895
expanded cell energy -61.9124364081
unrelaxed 100 surface formation energy 0.050792382278556904
bulk cell energy -62.423741895
expanded cell energy -61.7099619015
unrelaxed 100 surface formation energy 0.07090592066783225
bulk cell energy -62.423741895
expanded cell energy -61.5831268158
unrelaxed 100 surface formation energy 0.08350554324001776
bulk cell energy -62.423741895
expanded cell energy -61.5072850549
unrelaxed 100 surface formation energy 0.09103955922762862
bulk cell energy -62.423741895
expanded cell energy -61.3921787419
unrelaxed 100 surface formation energy 0.10247406169258384
bulk cell energy -62.423741895
expanded cell energy -61.221838096
unrelaxed 100 surface formation energy 0.11939546666256419
bulk cell energy -62.423741895
expanded cell energy -61.0489102917
unrelaxed 100 surface formation energy 0.13657387637194848
bulk cell energy -62.423741895
expanded cell energy -60.8754971923
unrelaxed 100 surface formation energy 0.15380049462823875
bulk cell energy -62.423741895
expanded cell energy -60.7016476126
unrelaxed 100 surface formation energy 0.171070472231123
bulk cell energy -62.423741895
expanded cell energy -60.5271667474
unrelaxed 100 surface formation energy 0.18840316087940848
bulk cell energy -62.423741895
expanded cell energy -60.3533859494
unrelaxed 100 surface formation energy 0.20566630580913628
bulk cell energy -62.423741895
expanded cell energy -60.1715705612
unrelaxed 100 surface formation energy 0.2237275958469474
bulk cell energy -62.423741895
expanded cell energy -59.9668937246
unrelaxed 100 surface formation energy 0.24405991066157134
bulk cell energy -62.423741895
expanded cell energy -59.7935209107
unrelaxed 100 surface formation energy 0.2612825270183245
bulk cell energy -62.423741895
expanded cell energy -59.6775948423
unrelaxed 100 surface formation energy 0.2727984628590571
bulk cell energy -62.423741895
expanded cell energy -59.6244259421
unrelaxed 100 surface formation energy 0.278080188114251
bulk cell energy -62.423741895
expanded cell energy -59.6150750638
unrelaxed 100 surface formation energy 0.2790090914720598
bulk cell energy -62.423741895
expanded cell energy -59.629328961
unrelaxed 100 surface formation energy 0.2775931289735195
bulk cell energy -62.423741895
expanded cell energy -59.651916186
unrelaxed 100 surface formation energy 0.27534934517804405
bulk cell energy -62.423741895
expanded cell energy -59.6719208374
unrelaxed 100 surface formation energy 0.2733621106851837
bulk cell energy -62.423741895
expanded cell energy -59.6825068703
unrelaxed 100 surface formation energy 0.2723105087669232
bulk cell energy -62.423741895
expanded cell energy -59.6786033992
unrelaxed 100 surface formation energy 0.2726982742024627
bulk cell energy -62.423741895
expanded cell energy -59.6481961372
unrelaxed 100 surface formation energy 0.2757188897003605
bulk cell energy -62.423741895
expanded cell energy -59.5620504226
unrelaxed 100 surface formation energy 0.2842764862427838
bulk cell energy -62.423741895
expanded cell energy -59.4347034296
unrelaxed 100 surface formation energy 0.29692696098164173
bulk cell energy -62.423741895
expanded cell energy -59.3336323412
unrelaxed 100 surface formation energy 0.30696722358484185
bulk cell energy -62.423741895
expanded cell energy -59.2900313589
unrelaxed 100 surface formation energy 0.3112984850701727
bulk cell energy -62.423741895
expanded cell energy -59.2712833701
unrelaxed 100 surface formation energy 0.31316088442951856
bulk cell energy -62.423741895
expanded cell energy -59.2555960524
unrelaxed 100 surface formation energy 0.314719240947548
bulk cell energy -62.423741895
expanded cell energy -59.2347433126
unrelaxed 100 surface formation energy 0.3167907233778
bulk cell energy -62.423741895
expanded cell energy -59.2065367588
unrelaxed 100 surface formation energy 0.3195927235503937
bulk cell energy -62.423741895
expanded cell energy -59.1704948363
unrelaxed 100 surface formation energy 0.32317307844784166
bulk cell energy -62.423741895
expanded cell energy -59.1280097123
unrelaxed 100 surface formation energy 0.3273934921075822
openings  [0.0, 0.09999999999999999, 0.19999999999999998, 0.3, 0.39999999999999997, 0.5, 0.6, 0.7000000000000001, 0.7999999999999999, 0.8999999999999999, 1.0, 1.1, 1.2, 1.3, 1.4000000000000001, 1.5, 1.5999999999999999, 1.7, 1.7999999999999998, 1.9, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8000000000000003, 2.9000000000000004, 3.0, 3.0999999999999996, 3.1999999999999997, 3.3, 3.4, 3.5]
es  ['0.0', '0.0077555190533936565', '0.02698883474559013', '0.050792382278556904', '0.07090592066783225', '0.08350554324001776', '0.09103955922762862', '0.10247406169258384', '0.11939546666256419', '0.13657387637194848', '0.15380049462823875', '0.171070472231123', '0.18840316087940848', '0.20566630580913628', '0.2237275958469474', '0.24405991066157134', '0.2612825270183245', '0.2727984628590571', '0.278080188114251', '0.2790090914720598', '0.2775931289735195', '0.27534934517804405', '0.2733621106851837', '0.2723105087669232', '0.2726982742024627', '0.2757188897003605', '0.2842764862427838', '0.29692696098164173', '0.30696722358484185', '0.3112984850701727', '0.31316088442951856', '0.314719240947548', '0.3167907233778', '0.3195927235503937', '0.32317307844784166', '0.3273934921075822']
stresses  ['-0.0008554298802936771', '0.14545499233805873', '0.2287005028957626', '0.2308488928337884', '0.16541650343634662', '0.08887992226465051', '0.08307296429894291', '0.14788377411655929', '0.17606916228288952', '0.17083401713282373', '0.1727456081560496', '0.1730814260182131', '0.17300867530619113', '0.17275888009741777', '0.19568885333030397', '0.19629385215442202', '0.14578367319332275', '0.082728020996862', '0.02723407569702354', '-0.005345465394877562', '-0.02046398833945721', '-0.02259097006776428', '-0.016102680039563333', '-0.004163402107610643', '0.012841193988379063', '0.05505005415721376', '0.11430495059239726', '0.12397228191163501', '0.07052804202280462', '0.025061272653072737', '0.01503669270520622', '0.017414632847363182', '0.024199944353786786', '0.03199006782285969', '0.03931043645602107', '0.044791243068710254']
============================================================
Property calculation output:


Summary of computed properties:
{'surface_decohesion_unrelaxed_energy': ['0.0', '0.0077555190533936565', '0.02698883474559013', '0.050792382278556904', '0.07090592066783225', '0.08350554324001776', '0.09103955922762862', '0.10247406169258384', '0.11939546666256419', '0.13657387637194848', '0.15380049462823875', '0.171070472231123', '0.18840316087940848', '0.20566630580913628', '0.2237275958469474', '0.24405991066157134', '0.2612825270183245', '0.2727984628590571', '0.278080188114251', '0.2790090914720598', '0.2775931289735195', '0.27534934517804405', '0.2733621106851837', '0.2723105087669232', '0.2726982742024627', '0.2757188897003605', '0.2842764862427838', '0.29692696098164173', '0.30696722358484185', '0.3112984850701727', '0.31316088442951856', '0.314719240947548', '0.3167907233778', '0.3195927235503937', '0.32317307844784166', '0.3273934921075822'], 'surface_decohesion_unrelaxed_opening': [0.0, 0.09999999999999999, 0.19999999999999998, 0.3, 0.39999999999999997, 0.5, 0.6, 0.7000000000000001, 0.7999999999999999, 0.8999999999999999, 1.0, 1.1, 1.2, 1.3, 1.4000000000000001, 1.5, 1.5999999999999999, 1.7, 1.7999999999999998, 1.9, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8000000000000003, 2.9000000000000004, 3.0, 3.0999999999999996, 3.1999999999999997, 3.3, 3.4, 3.5], 'surface_decohesion_unrelaxed_stress': ['-0.0008554298802936771', '0.14545499233805873', '0.2287005028957626', '0.2308488928337884', '0.16541650343634662', '0.08887992226465051', '0.08307296429894291', '0.14788377411655929', '0.17606916228288952', '0.17083401713282373', '0.1727456081560496', '0.1730814260182131', '0.17300867530619113', '0.17275888009741777', '0.19568885333030397', '0.19629385215442202', '0.14578367319332275', '0.082728020996862', '0.02723407569702354', '-0.005345465394877562', '-0.02046398833945721', '-0.02259097006776428', '-0.016102680039563333', '-0.004163402107610643', '0.012841193988379063', '0.05505005415721376', '0.11430495059239726', '0.12397228191163501', '0.07052804202280462', '0.025061272653072737', '0.01503669270520622', '0.017414632847363182', '0.024199944353786786', '0.03199006782285969', '0.03931043645602107', '0.044791243068710254']}
============================================================
