Model GAP_2b_3b, Test surface-energy-110-unrelaxed
Test run at 2018-09-03 18:54

model file: ../../../models/Ti/GAP_2b_3b/model.py
============================================================
import os

from quippy import Potential
import __builtin__

orig_dir = os.getcwd()
model_dir = os.path.dirname(__file__)
if model_dir != '':
    os.chdir(model_dir)

if os.path.exists('gp_iter6_sparse9k.xml.sparseX.GAP_2017_6_17_60_4_3_56_1651.bz2'):
    os.system('bunzip2 gp_iter6_sparse9k.xml.sparseX.GAP_2017_6_17_60_4_3_56_1651.bz2')

try:
    if hasattr(__builtin__, 'mpi_glob'):
        calculator = Potential(init_args='Potential xml_label="GAP_2018_5_29_60_13_48_53_535"',
                                               param_filename='gp_2b_3b.xml', mpi_obj=mpi_glob)
    else:
        calculator = Potential(init_args='Potential xml_label="GAP_2018_5_29_60_13_48_53_535"',
                                               param_filename='gp_2b_3b.xml')
    Potential.__str__ = lambda self: '<GAP Potential>'
finally:
    os.chdir(orig_dir)

no_checkpoint = True

name = 'GAP'
============================================================
test file: ../../../tests/Ti/surface-energy-110-unrelaxed/test.py
============================================================
# This script defines a test case which computes one or more physical
# properties with a given model
#
# INPUTS:
#   model.calculator -- an ase.calculator.Calculator instance
#     this script can assume the calculator is checkpointed.
#
# OUTPUTS:
#   properties -- dictionary of key/value pairs corresponding
#     to physical quantities computed by this test

# standard ASE structure generation routines
from ase.lattice.cubic import BodyCenteredCubic
import numpy as np

import ase.io, sys

# set of utility routines specific this this model/testing framework
from utilities import relax_atoms, relax_atoms_cell

# the current model
import model

a0 = 3.16 # initial guess at lattice constant, cell will be relaxed below
fmax = 0.01 # maximum force following relaxtion [eV/A]

# set up the a
bulk = BodyCenteredCubic(symbol='W', latticeconstant=a0, directions=[[1,-1,0],[0,0,1],[1,1,0]])

# specify that we will use model.calculator to compute forces, energies and stresses
bulk.set_calculator(model.calculator)
# flip coord system for ASE (precon minim?)
c = bulk.get_cell()
t_v = c[0,:].copy()
c[0,:] = c[1,:]
c[1,:] = t_v
bulk.set_cell(c)

# use one of the routines from utilities module to relax the initial
# unit cell and atomic positions
bulk = relax_atoms_cell(bulk, tol=fmax, traj_file=None)

# set up supercell
bulk *= (1, 1, 10)

ase.io.write(sys.stdout, bulk, format='extxyz')

def surface_energy(bulk, z_offset):
    Nat = bulk.get_number_of_atoms()

    # shift so cut is through shuffle plane
    bulk.positions[:,2] += z_offset
    bulk.wrap()

    # relax atom positions, holding cell fixed
    # vac = relax_atoms(vac, fmax=fmax)

    # compute surface formation energy as difference of bulk and expanded cell
    ebulk = bulk.get_potential_energy()
    print 'bulk cell energy', ebulk

    bulk.cell[2,2] *= (np.abs(bulk.cell[2,2])+10.0)/np.abs(bulk.cell[2,2])
    eexp  = bulk.get_potential_energy()

    ase.io.write(sys.stdout, bulk, format='extxyz')

    print 'expanded cell energy', eexp
    e_form = 0.5*(eexp - ebulk) / np.linalg.norm(np.cross(bulk.cell[0,:],bulk.cell[1,:]))
    print 'unrelaxed 110 surface formation energy', e_form
    return e_form

# dictionary of computed properties - this is output of this test, to
#   be compared with other models
properties = {'surface_energy_110_unrelaxed':
                surface_energy(bulk, 1.0) }
============================================================
WARNING: Creating a left-handed coordinate system!
relax_atoms_cell using method lbfgs_precon
WARNING:ase.optimize.precon:use_pyamg=True but PyAMG cannot be imported! falling back on direct inversion of preconditioner, may be slow for large systems
PreconLBFGS:   0  18:54:24      -23.363379       0.0000       0.0483
INFO:ase.optimize.precon:estimate_nearest_neighbour_distance(): calling neighbour_list with r_cut=1.00 A
INFO:ase.optimize.precon:estimate_nearest_neighbour_distance(): calling neighbour_list with r_cut=1.62 A
INFO:ase.optimize.precon:estimate_nearest_neighbour_distance(): calling neighbour_list with r_cut=2.62 A
INFO:ase.optimize.precon:estimate_nearest_neighbour_distance(): calling neighbour_list with r_cut=4.24 A
INFO:ase.optimize.precon:estimate_nearest_neighbour_distance(): got r_NN=2.737 in 0.00153779983521 s
INFO:ase.optimize.precon:creating sparse precon: initial_assembly=True, force_stab=False, apply_positions=True, apply_cell=True
INFO:ase.optimize.precon:--- neighbour list created in 0.000272035598755 s ---
INFO:ase.optimize.precon:adding stabilisation to preconditioner
INFO:ase.optimize.precon:--- computed triplet format in 0.000217914581299 s ---
INFO:ase.optimize.precon:--- remove zeros in 8.29696655273e-05 s ---
INFO:ase.optimize.precon:--- created CSC matrix in 0.00113105773926 s ---
INFO:ase.optimize.precon:--- N-dim precon created in 0.00117087364197 s ---
INFO:ase.optimize.precon:mu (0.027) < 1.0, capping at mu=1.0
INFO:ase.optimize.precon:mu_c (-28.240) < 1.0, capping at mu_c=1.0
INFO:ase.optimize.precon:estimate_mu(): mu=1.0, mu_c=1.0
INFO:ase.optimize.precon:creating sparse precon: initial_assembly=False, force_stab=False, apply_positions=True, apply_cell=True
INFO:ase.optimize.precon:--- neighbour list created in 0.00025486946106 s ---
INFO:ase.optimize.precon:adding stabilisation to preconditioner
INFO:ase.optimize.precon:--- computed triplet format in 0.000185012817383 s ---
INFO:ase.optimize.precon:--- applied fixed_atoms in 7.00950622559e-05 s ---
INFO:ase.optimize.precon:--- remove zeros in 6.50882720947e-05 s ---
INFO:ase.optimize.precon:--- created CSC matrix in 0.000622034072876 s ---
INFO:ase.optimize.precon:--- N-dim precon created in 0.00100994110107 s ---
INFO:ase.optimize.precon:--- Precon created in 0.00302791595459 seconds ---
INFO:ase.optimize.precon:--- Precon applied in 0.000303030014038 seconds ---
INFO:ase.utils.linesearcharmijo:a1 = 1.000, suff_dec = False
INFO:ase.utils.linesearcharmijo:a1 = 0.264, suff_dec = True
PreconLBFGS:   1  18:54:25      -24.135442       0.0000       0.0300
INFO:ase.optimize.precon:creating sparse precon: initial_assembly=True, force_stab=False, apply_positions=True, apply_cell=True
INFO:ase.optimize.precon:--- neighbour list created in 0.000233173370361 s ---
INFO:ase.optimize.precon:adding stabilisation to preconditioner
INFO:ase.optimize.precon:--- computed triplet format in 0.000173091888428 s ---
INFO:ase.optimize.precon:--- remove zeros in 6.19888305664e-05 s ---
INFO:ase.optimize.precon:--- created CSC matrix in 0.000663995742798 s ---
INFO:ase.optimize.precon:--- N-dim precon created in 0.00120902061462 s ---
INFO:ase.optimize.precon:mu (-1.826) < 1.0, capping at mu=1.0
INFO:ase.optimize.precon:estimate_mu(): mu=1.0, mu_c=172.62660326005064
INFO:ase.optimize.precon:creating sparse precon: initial_assembly=False, force_stab=False, apply_positions=True, apply_cell=True
INFO:ase.optimize.precon:--- neighbour list created in 0.000221014022827 s ---
INFO:ase.optimize.precon:adding stabilisation to preconditioner
INFO:ase.optimize.precon:--- computed triplet format in 0.000174999237061 s ---
INFO:ase.optimize.precon:--- applied fixed_atoms in 5.10215759277e-05 s ---
INFO:ase.optimize.precon:--- remove zeros in 6.00814819336e-05 s ---
INFO:ase.optimize.precon:--- created CSC matrix in 0.000648975372314 s ---
INFO:ase.optimize.precon:--- N-dim precon created in 0.00108695030212 s ---
INFO:ase.optimize.precon:--- Precon created in 0.00310397148132 seconds ---
INFO:ase.optimize.precon:--- Precon applied in 0.000201940536499 seconds ---
INFO:ase.utils.linesearcharmijo:a1 = 1.000, suff_dec = False
INFO:ase.utils.linesearcharmijo:a1 = 0.160, suff_dec = True
PreconLBFGS:   2  18:54:25      -24.187913       0.0000       0.0022
40
Lattice="1.1279209185553262e-17 3.374007301355921 -1.2297990190598355e-15 4.771566885123452 1.5951210603052623e-17 1.0144540805637987e-17 -1.014454080563798e-16 1.7391984517475448e-14 -47.7156688512381" Properties=species:S:1:pos:R:3:Z:I:1 pbc="T T T" energy=-24.1879132888 stress="0.0022093804955613805 -3.845154620898103e-16 1.1733867407965834e-15 -3.845154620898103e-16 0.002209380495567743 -3.3162178681954894e-15 1.1733867407965834e-15 -3.3162178681954894e-15 0.0022093804955900607" forces="3.3259265039292655e-15 -1.5050460877574778e-14 1.6033615407584634e-14 -4.4821459911636996e-15 -4.65599780952175e-15 -5.758674787026408e-14 8.599989210350545e-14 -2.391142839286431e-14 3.390018300797326e-14 -4.6265075104301445e-14 3.24636674301613e-14 -2.018914358490979e-14"
W       0.00000000       0.00000000       0.00000000       74 
W       2.38578344       1.68700365      -0.00000000       74 
W       2.38578344       0.00000000      -2.38578344       74 
W       0.00000000       1.68700365      -2.38578344       74 
W       0.00000000       0.00000000      -4.77156689       74 
W       2.38578344       1.68700365      -4.77156689       74 
W       2.38578344       0.00000000      -7.15735033       74 
W       0.00000000       1.68700365      -7.15735033       74 
W       0.00000000       0.00000000      -9.54313377       74 
W       2.38578344       1.68700365      -9.54313377       74 
W       2.38578344       0.00000000     -11.92891721       74 
W       0.00000000       1.68700365     -11.92891721       74 
W       0.00000000       0.00000000     -14.31470066       74 
W       2.38578344       1.68700365     -14.31470066       74 
W       2.38578344       0.00000000     -16.70048410       74 
W       0.00000000       1.68700365     -16.70048410       74 
W       0.00000000       0.00000000     -19.08626754       74 
W       2.38578344       1.68700365     -19.08626754       74 
W       2.38578344       0.00000000     -21.47205098       74 
W       0.00000000       1.68700365     -21.47205098       74 
W       0.00000000       0.00000000     -23.85783443       74 
W       2.38578344       1.68700365     -23.85783443       74 
W       2.38578344       0.00000000     -26.24361787       74 
W       0.00000000       1.68700365     -26.24361787       74 
W       0.00000000       0.00000000     -28.62940131       74 
W       2.38578344       1.68700365     -28.62940131       74 
W       2.38578344       0.00000000     -31.01518475       74 
W       0.00000000       1.68700365     -31.01518475       74 
W       0.00000000       0.00000000     -33.40096820       74 
W       2.38578344       1.68700365     -33.40096820       74 
W       2.38578344       0.00000000     -35.78675164       74 
W       0.00000000       1.68700365     -35.78675164       74 
W       0.00000000       0.00000000     -38.17253508       74 
W       2.38578344       1.68700365     -38.17253508       74 
W       2.38578344       0.00000000     -40.55831852       74 
W       0.00000000       1.68700365     -40.55831852       74 
W       0.00000000       0.00000000     -42.94410197       74 
W       2.38578344       1.68700365     -42.94410197       74 
W       2.38578344       0.00000000     -45.32988541       74 
W       0.00000000       1.68700365     -45.32988541       74 
bulk cell energy -241.879132888
40
Lattice="1.1279209185553262e-17 3.374007301355921 -1.2297990190598355e-15 4.771566885123452 1.5951210603052623e-17 1.0144540805637987e-17 -1.014454080563798e-16 1.7391984517475448e-14 -57.71566885123811" Properties=species:S:1:pos:R:3:Z:I:1 energy=-239.85314242 pbc="T T T"
W       0.00000000       0.00000000     -46.71566885       74 
W       2.38578344       1.68700365     -46.71566885       74 
W       2.38578344       0.00000000      -1.38578344       74 
W       0.00000000       1.68700365      -1.38578344       74 
W       0.00000000       0.00000000      -3.77156689       74 
W       2.38578344       1.68700365      -3.77156689       74 
W       2.38578344       0.00000000      -6.15735033       74 
W       0.00000000       1.68700365      -6.15735033       74 
W       0.00000000       0.00000000      -8.54313377       74 
W       2.38578344       1.68700365      -8.54313377       74 
W       2.38578344       0.00000000     -10.92891721       74 
W       0.00000000       1.68700365     -10.92891721       74 
W       0.00000000       0.00000000     -13.31470066       74 
W       2.38578344       1.68700365     -13.31470066       74 
W       2.38578344       0.00000000     -15.70048410       74 
W       0.00000000       1.68700365     -15.70048410       74 
W       0.00000000       0.00000000     -18.08626754       74 
W       2.38578344       1.68700365     -18.08626754       74 
W       2.38578344       0.00000000     -20.47205098       74 
W       0.00000000       1.68700365     -20.47205098       74 
W       0.00000000       0.00000000     -22.85783443       74 
W       2.38578344       1.68700365     -22.85783443       74 
W       2.38578344       0.00000000     -25.24361787       74 
W       0.00000000       1.68700365     -25.24361787       74 
W       0.00000000       0.00000000     -27.62940131       74 
W       2.38578344       1.68700365     -27.62940131       74 
W       2.38578344       0.00000000     -30.01518475       74 
W       0.00000000       1.68700365     -30.01518475       74 
W       0.00000000       0.00000000     -32.40096820       74 
W       2.38578344       1.68700365     -32.40096820       74 
W       2.38578344       0.00000000     -34.78675164       74 
W       0.00000000       1.68700365     -34.78675164       74 
W       0.00000000       0.00000000     -37.17253508       74 
W       2.38578344       1.68700365     -37.17253508       74 
W       2.38578344       0.00000000     -39.55831852       74 
W       0.00000000       1.68700365     -39.55831852       74 
W       0.00000000       0.00000000     -41.94410197       74 
W       2.38578344       1.68700365     -41.94410197       74 
W       2.38578344       0.00000000     -44.32988541       74 
W       0.00000000       1.68700365     -44.32988541       74 
expanded cell energy -239.85314242
unrelaxed 110 surface formation energy 0.06292168844057484
============================================================
Property calculation output:


Summary of computed properties:
{'surface_energy_110_unrelaxed': '0.06292168844057484'}
============================================================
