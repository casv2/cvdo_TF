Model GAP_soap, Test surface-decohesion-100-unrelaxed
Test run at 2018-09-10 15:02

model file: ../../../models/Ti/GAP_soap/model.py
============================================================
import os

from quippy import Potential
import __builtin__

orig_dir = os.getcwd()
model_dir = os.path.dirname(__file__)
if model_dir != '':
    os.chdir(model_dir)

if os.path.exists('gp_iter6_sparse9k.xml.sparseX.GAP_2017_6_17_60_4_3_56_1651.bz2'):
    os.system('bunzip2 gp_iter6_sparse9k.xml.sparseX.GAP_2017_6_17_60_4_3_56_1651.bz2')

try:
    if hasattr(__builtin__, 'mpi_glob'):
        calculator = Potential(init_args='Potential xml_label="GAP_2018_6_25_60_16_10_2_989"',
                                               param_filename='gp_soap_no_wire_surface.xml', mpi_obj=mpi_glob)
    else:
        calculator = Potential(init_args='Potential xml_label="GAP_2018_6_25_60_16_10_2_989"',
                                               param_filename='gp_soap_no_wire_surface.xml')
    Potential.__str__ = lambda self: '<GAP Potential>'
finally:
    os.chdir(orig_dir)

no_checkpoint = True

name = 'GAP'
============================================================
test file: ../../../tests/Ti/surface-decohesion-100-unrelaxed/test.py
============================================================
# This script defines a test case which computes one or more physical
# properties with a given model
#
# INPUTS: 
#   model.calculator -- an ase.calculator.Calculator instance
#     this script can assume the calculator is checkpointed.
#
# OUTPUTS:
#   properties -- dictionary of key/value pairs corresponding
#     to physical quantities computed by this test

# standard ASE structure generation routines
from ase.lattice.cubic import BodyCenteredCubic

# set of utility routines specific this this model/testing framework
from utilities import relax_atoms, relax_atoms_cell

# the current model
import model 

a0 = 3.32 # initial guess at lattice constant, cell will be relaxed below
fmax = 0.01 # maximum force following relaxtion [eV/A]

# set up the a
bulk = BodyCenteredCubic(symbol='Ti', latticeconstant=a0)

# specify that we will use model.calculator to compute forces, energies and stresses
bulk.set_calculator(model.calculator)

# use one of the routines from utilities module to relax the initial
# unit cell and atomic positions
bulk = relax_atoms_cell(bulk, tol=fmax, traj_file=None)

# set up supercell
bulk *= (5, 1, 1)

def surface_energy(bulk, opening):
    Nat = bulk.get_number_of_atoms()

    # relax atom positions, holding cell fixed
    # vac = relax_atoms(vac, fmax=fmax)

    # compute surface formation energy as difference of bulk and expanded cell
    ebulk = bulk.get_potential_energy()
    print 'bulk cell energy', ebulk

    bulk.cell[0,:] += [opening,0.0,0.0]
    eexp  = bulk.get_potential_energy()
    
    print 'expanded cell energy', eexp
    e_form = (eexp - ebulk) / (bulk.cell[1,1]*bulk.cell[2,2])
    print 'unrelaxed 100 surface formation energy', e_form
    return e_form

# dictionary of computed properties - this is output of this test, to
#   be compared with other models
n_steps = 35
max_opening = 3.5

openings = []
es = []
for i in range(n_steps + 1):
    opening = float(i)/float(n_steps)*max_opening
    openings.append(opening)
    bulk_copy = bulk.copy()
    bulk_copy.set_calculator(model.calculator)
    es.append(surface_energy(bulk_copy, opening))

print "openings ", openings
print "es ", es
from scipy import interpolate
spline = interpolate.splrep(openings, es, s=0)
stresses = [x for x in interpolate.splev(openings, spline, der=1)]

print "stresses ", stresses
properties = {'surface_decohesion_unrelaxed_opening': openings, 'surface_decohesion_unrelaxed_energy' : es, 'surface_decohesion_unrelaxed_stress' : stresses}

============================================================
relax_atoms_cell using method cg_n
WARNING:quippy.potential:Minim atoms is not quippy.Atoms instance, copy forced!
bulk cell energy -60.240864297
expanded cell energy -60.240864297
unrelaxed 100 surface formation energy 0.0
bulk cell energy -60.240864297
expanded cell energy -60.2204042706
unrelaxed 100 surface formation energy 0.0019023202645253267
bulk cell energy -60.240864297
expanded cell energy -60.1583860379
unrelaxed 100 surface formation energy 0.00766861493951401
bulk cell energy -60.240864297
expanded cell energy -60.0756538765
unrelaxed 100 surface formation energy 0.015360837050450866
bulk cell energy -60.240864297
expanded cell energy -59.9953603598
unrelaxed 100 surface formation energy 0.022826320297119992
bulk cell energy -60.240864297
expanded cell energy -59.9059380093
unrelaxed 100 surface formation energy 0.03114057887207482
bulk cell energy -60.240864297
expanded cell energy -59.7922921958
unrelaxed 100 surface formation energy 0.041707072303866756
bulk cell energy -60.240864297
expanded cell energy -59.6501648181
unrelaxed 100 surface formation energy 0.05492170781670904
bulk cell energy -60.240864297
expanded cell energy -59.4953566643
unrelaxed 100 surface formation energy 0.06931536904637559
bulk cell energy -60.240864297
expanded cell energy -59.3481244614
unrelaxed 100 surface formation energy 0.08300463798655747
bulk cell energy -60.240864297
expanded cell energy -59.2244137133
unrelaxed 100 surface formation energy 0.09450694297563436
bulk cell energy -60.240864297
expanded cell energy -59.1159250096
unrelaxed 100 surface formation energy 0.10459394168949031
bulk cell energy -60.240864297
expanded cell energy -58.9788023914
unrelaxed 100 surface formation energy 0.11734324762516245
bulk cell energy -60.240864297
expanded cell energy -58.8272850795
unrelaxed 100 surface formation energy 0.13143093490349345
bulk cell energy -60.240864297
expanded cell energy -58.7197882668
unrelaxed 100 surface formation energy 0.1414257101654528
bulk cell energy -60.240864297
expanded cell energy -58.6468484829
unrelaxed 100 surface formation energy 0.14820746238297372
bulk cell energy -60.240864297
expanded cell energy -58.5746568471
unrelaxed 100 surface formation energy 0.15491965372741695
bulk cell energy -60.240864297
expanded cell energy -58.5075156383
unrelaxed 100 surface formation energy 0.16116226944495493
bulk cell energy -60.240864297
expanded cell energy -58.4434752478
unrelaxed 100 surface formation energy 0.16711657910829017
bulk cell energy -60.240864297
expanded cell energy -58.3784420298
unrelaxed 100 surface formation energy 0.1731631993018944
bulk cell energy -60.240864297
expanded cell energy -58.3145552899
unrelaxed 100 surface formation energy 0.17910322292629072
bulk cell energy -60.240864297
expanded cell energy -58.2535402465
unrelaxed 100 surface formation energy 0.18477624365239637
bulk cell energy -60.240864297
expanded cell energy -58.1975481735
unrelaxed 100 surface formation energy 0.1899822416015822
bulk cell energy -60.240864297
expanded cell energy -58.1488230799
unrelaxed 100 surface formation energy 0.19451257461842175
bulk cell energy -60.240864297
expanded cell energy -58.1053709593
unrelaxed 100 surface formation energy 0.1985526402639305
bulk cell energy -60.240864297
expanded cell energy -58.061675662
unrelaxed 100 surface formation energy 0.20261531585248974
bulk cell energy -60.240864297
expanded cell energy -58.0219235062
unrelaxed 100 surface formation energy 0.20631136834721145
bulk cell energy -60.240864297
expanded cell energy -57.9865948757
unrelaxed 100 surface formation energy 0.2095961329269098
bulk cell energy -60.240864297
expanded cell energy -57.9548256367
unrelaxed 100 surface formation energy 0.21254995449242653
bulk cell energy -60.240864297
expanded cell energy -57.9249261156
unrelaxed 100 surface formation energy 0.2153299345393581
bulk cell energy -60.240864297
expanded cell energy -57.8964320914
unrelaxed 100 surface formation energy 0.21797923511807415
bulk cell energy -60.240864297
expanded cell energy -57.8692828607
unrelaxed 100 surface formation energy 0.22050350027558815
bulk cell energy -60.240864297
expanded cell energy -57.8428168853
unrelaxed 100 surface formation energy 0.2229642381307873
bulk cell energy -60.240864297
expanded cell energy -57.8166149915
unrelaxed 100 surface formation energy 0.22540042236252228
bulk cell energy -60.240864297
expanded cell energy -57.7913853299
unrelaxed 100 surface formation energy 0.22774621095841166
bulk cell energy -60.240864297
expanded cell energy -57.7671217575
unrelaxed 100 surface formation energy 0.23000217508232912
openings  [0.0, 0.09999999999999999, 0.19999999999999998, 0.3, 0.39999999999999997, 0.5, 0.6, 0.7000000000000001, 0.7999999999999999, 0.8999999999999999, 1.0, 1.1, 1.2, 1.3, 1.4000000000000001, 1.5, 1.5999999999999999, 1.7, 1.7999999999999998, 1.9, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8000000000000003, 2.9000000000000004, 3.0, 3.0999999999999996, 3.1999999999999997, 3.3, 3.4, 3.5]
es  ['0.0', '0.0019023202645253267', '0.00766861493951401', '0.015360837050450866', '0.022826320297119992', '0.03114057887207482', '0.041707072303866756', '0.05492170781670904', '0.06931536904637559', '0.08300463798655747', '0.09450694297563436', '0.10459394168949031', '0.11734324762516245', '0.13143093490349345', '0.1414257101654528', '0.14820746238297372', '0.15491965372741695', '0.16116226944495493', '0.16711657910829017', '0.1731631993018944', '0.17910322292629072', '0.18477624365239637', '0.1899822416015822', '0.19451257461842175', '0.1985526402639305', '0.20261531585248974', '0.20631136834721145', '0.2095961329269098', '0.21254995449242653', '0.2153299345393581', '0.21797923511807415', '0.22050350027558815', '0.2229642381307873', '0.22540042236252228', '0.22774621095841166', '0.23000217508232912']
stresses  ['-0.005822862163292576', '0.04110617107568458', '0.07145662604597455', '0.0768228283181834', '0.07598322140947121', '0.09263654069265018', '0.11989317602233097', '0.14122462355705212', '0.1434572320247267', '0.12743435343949558', '0.10255257209505303', '0.11003446926827656', '0.14239869031768398', '0.12548056588108006', '0.07815292236670475', '0.06520356903651094', '0.06585110834617815', '0.06003620943821357', '0.05991181532716451', '0.060344424961311344', '0.05830979936760483', '0.05480770808332881', '0.048829928557821305', '0.04196250666614765', '0.04043200464803997', '0.03939171176373168', '0.034762990795461884', '0.030980837287021945', '0.028471244412902882', '0.02714823343481363', '0.025814240617270723', '0.024801776183007614', '0.024528745032095196', '0.02399090629663548', '0.022966814610093207', '0.022194416857196204']
============================================================
Property calculation output:


Summary of computed properties:
{'surface_decohesion_unrelaxed_energy': ['0.0', '0.0019023202645253267', '0.00766861493951401', '0.015360837050450866', '0.022826320297119992', '0.03114057887207482', '0.041707072303866756', '0.05492170781670904', '0.06931536904637559', '0.08300463798655747', '0.09450694297563436', '0.10459394168949031', '0.11734324762516245', '0.13143093490349345', '0.1414257101654528', '0.14820746238297372', '0.15491965372741695', '0.16116226944495493', '0.16711657910829017', '0.1731631993018944', '0.17910322292629072', '0.18477624365239637', '0.1899822416015822', '0.19451257461842175', '0.1985526402639305', '0.20261531585248974', '0.20631136834721145', '0.2095961329269098', '0.21254995449242653', '0.2153299345393581', '0.21797923511807415', '0.22050350027558815', '0.2229642381307873', '0.22540042236252228', '0.22774621095841166', '0.23000217508232912'], 'surface_decohesion_unrelaxed_opening': [0.0, 0.09999999999999999, 0.19999999999999998, 0.3, 0.39999999999999997, 0.5, 0.6, 0.7000000000000001, 0.7999999999999999, 0.8999999999999999, 1.0, 1.1, 1.2, 1.3, 1.4000000000000001, 1.5, 1.5999999999999999, 1.7, 1.7999999999999998, 1.9, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8000000000000003, 2.9000000000000004, 3.0, 3.0999999999999996, 3.1999999999999997, 3.3, 3.4, 3.5], 'surface_decohesion_unrelaxed_stress': ['-0.005822862163292576', '0.04110617107568458', '0.07145662604597455', '0.0768228283181834', '0.07598322140947121', '0.09263654069265018', '0.11989317602233097', '0.14122462355705212', '0.1434572320247267', '0.12743435343949558', '0.10255257209505303', '0.11003446926827656', '0.14239869031768398', '0.12548056588108006', '0.07815292236670475', '0.06520356903651094', '0.06585110834617815', '0.06003620943821357', '0.05991181532716451', '0.060344424961311344', '0.05830979936760483', '0.05480770808332881', '0.048829928557821305', '0.04196250666614765', '0.04043200464803997', '0.03939171176373168', '0.034762990795461884', '0.030980837287021945', '0.028471244412902882', '0.02714823343481363', '0.025814240617270723', '0.024801776183007614', '0.024528745032095196', '0.02399090629663548', '0.022966814610093207', '0.022194416857196204']}
============================================================
