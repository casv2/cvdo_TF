Model GAP, Test surface-decohesion-100-unrelaxed
Test run at 2018-08-31 15:57

model file: ../../../models/Si/GAP/model.py
============================================================
import os

from quippy import Potential
import __builtin__

orig_dir = os.getcwd()
model_dir = os.path.dirname(__file__)
if model_dir != '':
    os.chdir(model_dir)

if os.path.exists('gp_iter6_sparse9k.xml.sparseX.GAP_2017_6_17_60_4_3_56_1651.bz2'):
    os.system('bunzip2 gp_iter6_sparse9k.xml.sparseX.GAP_2017_6_17_60_4_3_56_1651.bz2')

try:
    if hasattr(__builtin__, 'mpi_glob'):
        calculator = Potential(init_args='Potential xml_label="GAP_2017_6_17_60_4_3_56_165"',
                                               param_filename='gp_iter6_sparse9k.xml', mpi_obj=mpi_glob)
    else:
        calculator = Potential(init_args='Potential xml_label="GAP_2017_6_17_60_4_3_56_165"',
                                               param_filename='gp_iter6_sparse9k.xml')
    Potential.__str__ = lambda self: '<GAP Potential>'
finally:
    os.chdir(orig_dir)

no_checkpoint = True

name = 'GAP'
============================================================
test file: ../../../tests/Si/surface-decohesion-100-unrelaxed/test.py
============================================================
# This script defines a test case which computes one or more physical
# properties with a given model
#
# INPUTS: 
#   model.calculator -- an ase.calculator.Calculator instance
#     this script can assume the calculator is checkpointed.
#
# OUTPUTS:
#   properties -- dictionary of key/value pairs corresponding
#     to physical quantities computed by this test

# standard ASE structure generation routines
from ase.lattice.cubic import Diamond

# set of utility routines specific this this model/testing framework
from utilities import relax_atoms, relax_atoms_cell

# the current model
import model 

a0 = 5.44 # initial guess at lattice constant, cell will be relaxed below
fmax = 0.01 # maximum force following relaxtion [eV/A]

# set up the a
bulk = Diamond(symbol='Si', latticeconstant=a0)

# specify that we will use model.calculator to compute forces, energies and stresses
bulk.set_calculator(model.calculator)

# use one of the routines from utilities module to relax the initial
# unit cell and atomic positions
bulk = relax_atoms_cell(bulk, tol=fmax, traj_file=None)

# set up supercell
bulk *= (5, 1, 1)

def surface_energy(bulk, opening):
    Nat = bulk.get_number_of_atoms()

    # relax atom positions, holding cell fixed
    # vac = relax_atoms(vac, fmax=fmax)

    # compute surface formation energy as difference of bulk and expanded cell
    ebulk = bulk.get_potential_energy()
    print 'bulk cell energy', ebulk

    bulk.cell[0,:] += [opening,0.0,0.0]
    eexp  = bulk.get_potential_energy()
    
    print 'expanded cell energy', eexp
    e_form = (eexp - ebulk) / (bulk.cell[1,1]*bulk.cell[2,2])
    print 'unrelaxed 100 surface formation energy', e_form
    return e_form

# dictionary of computed properties - this is output of this test, to
#   be compared with other models
n_steps = 35
max_opening = 3.5

openings = []
es = []
for i in range(n_steps + 1):
    opening = float(i)/float(n_steps)*max_opening
    openings.append(opening)
    bulk_copy = bulk.copy()
    bulk_copy.set_calculator(model.calculator)
    es.append(surface_energy(bulk_copy, opening))

print "openings ", openings
print "es ", es
from scipy import interpolate
spline = interpolate.splrep(openings, es, s=0)
stresses = [x for x in interpolate.splev(openings, spline, der=1)]

print "stresses ", stresses
properties = {'surface_decohesion_unrelaxed_opening': openings, 'surface_decohesion_unrelaxed_energy' : es, 'surface_decohesion_unrelaxed_stress' : stresses}

============================================================
relax_atoms_cell using method lbfgs_precon
WARNING:ase.optimize.precon:use_pyamg=True but PyAMG cannot be imported! falling back on direct inversion of preconditioner, may be slow for large systems
PreconLBFGS:   0  15:58:42    -1305.415044       0.0000       0.0065
bulk cell energy -6527.07521824
expanded cell energy -6527.07521824
unrelaxed 100 surface formation energy 0.0
bulk cell energy -6527.07521824
expanded cell energy -6527.01334281
unrelaxed 100 surface formation energy 0.002090838147415329
bulk cell energy -6527.07521824
expanded cell energy -6526.80139543
unrelaxed 100 surface formation energy 0.009252771135886555
bulk cell energy -6527.07521824
expanded cell energy -6526.45879098
unrelaxed 100 surface formation energy 0.020829748946612898
bulk cell energy -6527.07521824
expanded cell energy -6526.00998254
unrelaxed 100 surface formation energy 0.03599547513505541
bulk cell energy -6527.07521824
expanded cell energy -6525.48724928
unrelaxed 100 surface formation energy 0.0536592018490978
bulk cell energy -6527.07521824
expanded cell energy -6524.93382501
unrelaxed 100 surface formation energy 0.07236001128810468
bulk cell energy -6527.07521824
expanded cell energy -6524.3929352
unrelaxed 100 surface formation energy 0.09063726750810092
bulk cell energy -6527.07521824
expanded cell energy -6523.88561068
unrelaxed 100 surface formation energy 0.10778031582482901
bulk cell energy -6527.07521824
expanded cell energy -6523.41269725
unrelaxed 100 surface formation energy 0.12376057624114269
bulk cell energy -6527.07521824
expanded cell energy -6522.96546802
unrelaxed 100 surface formation energy 0.13887293927338454
bulk cell energy -6527.07521824
expanded cell energy -6522.53640621
unrelaxed 100 surface formation energy 0.15337140563756252
bulk cell energy -6527.07521824
expanded cell energy -6522.12217984
unrelaxed 100 surface formation energy 0.16736856606242
bulk cell energy -6527.07521824
expanded cell energy -6521.72448826
unrelaxed 100 surface formation energy 0.1808069980582795
bulk cell energy -6527.07521824
expanded cell energy -6521.36755125
unrelaxed 100 surface formation energy 0.19286828869798572
bulk cell energy -6527.07521824
expanded cell energy -6521.11699033
unrelaxed 100 surface formation energy 0.20133501522321778
bulk cell energy -6527.07521824
expanded cell energy -6520.9226579
unrelaxed 100 surface formation energy 0.20790172002909854
bulk cell energy -6527.07521824
expanded cell energy -6520.74061827
unrelaxed 100 surface formation energy 0.21405303724758434
bulk cell energy -6527.07521824
expanded cell energy -6520.56871856
unrelaxed 100 surface formation energy 0.21986171609085053
bulk cell energy -6527.07521824
expanded cell energy -6520.40545804
unrelaxed 100 surface formation energy 0.2253784667174607
bulk cell energy -6527.07521824
expanded cell energy -6520.25069673
unrelaxed 100 surface formation energy 0.23060802008020706
bulk cell energy -6527.07521824
expanded cell energy -6520.10564212
unrelaxed 100 surface formation energy 0.2355095735891169
bulk cell energy -6527.07521824
expanded cell energy -6519.96987362
unrelaxed 100 surface formation energy 0.24009733924198187
bulk cell energy -6527.07521824
expanded cell energy -6519.83470181
unrelaxed 100 surface formation energy 0.24466494209506642
bulk cell energy -6527.07521824
expanded cell energy -6519.70835609
unrelaxed 100 surface formation energy 0.248934301429565
bulk cell energy -6527.07521824
expanded cell energy -6519.60211617
unrelaxed 100 surface formation energy 0.25252426426584945
bulk cell energy -6527.07521824
expanded cell energy -6519.52149139
unrelaxed 100 surface formation energy 0.2552486634244698
bulk cell energy -6527.07521824
expanded cell energy -6519.46314485
unrelaxed 100 surface formation energy 0.25722025649864616
bulk cell energy -6527.07521824
expanded cell energy -6519.41641324
unrelaxed 100 surface formation energy 0.258799368514819
bulk cell energy -6527.07521824
expanded cell energy -6519.36751703
unrelaxed 100 surface formation energy 0.2604516247480726
bulk cell energy -6527.07521824
expanded cell energy -6519.30664498
unrelaxed 100 surface formation energy 0.26250855785747973
bulk cell energy -6527.07521824
expanded cell energy -6519.23680935
unrelaxed 100 surface formation energy 0.26486837997331186
bulk cell energy -6527.07521824
expanded cell energy -6519.18006135
unrelaxed 100 surface formation energy 0.26678595656635784
bulk cell energy -6527.07521824
expanded cell energy -6519.16885546
unrelaxed 100 surface formation energy 0.26716461573137323
bulk cell energy -6527.07521824
expanded cell energy -6519.16885548
unrelaxed 100 surface formation energy 0.26716461536383945
bulk cell energy -6527.07521824
expanded cell energy -6519.16885548
unrelaxed 100 surface formation energy 0.26716461536383945
openings  [0.0, 0.09999999999999999, 0.19999999999999998, 0.3, 0.39999999999999997, 0.5, 0.6, 0.7000000000000001, 0.7999999999999999, 0.8999999999999999, 1.0, 1.1, 1.2, 1.3, 1.4000000000000001, 1.5, 1.5999999999999999, 1.7, 1.7999999999999998, 1.9, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8000000000000003, 2.9000000000000004, 3.0, 3.0999999999999996, 3.1999999999999997, 3.3, 3.4, 3.5]
es  ['0.0', '0.002090838147415329', '0.009252771135886555', '0.020829748946612898', '0.03599547513505541', '0.0536592018490978', '0.07236001128810468', '0.09063726750810092', '0.10778031582482901', '0.12376057624114269', '0.13887293927338454', '0.15337140563756252', '0.16736856606242', '0.1808069980582795', '0.19286828869798572', '0.20133501522321778', '0.20790172002909854', '0.21405303724758434', '0.21986171609085053', '0.2253784667174607', '0.23060802008020706', '0.2355095735891169', '0.24009733924198187', '0.24466494209506642', '0.248934301429565', '0.25252426426584945', '0.2552486634244698', '0.25722025649864616', '0.258799368514819', '0.2604516247480726', '0.26250855785747973', '0.26486837997331186', '0.26678595656635784', '0.26716461573137323', '0.26716461536383945', '0.26716461536383945']
stresses  ['-0.006524134476279037', '0.047302376552009195', '0.094897762344839', '0.13527389804456197', '0.16628776545197865', '0.18445862722207013', '0.18681381025121874', '0.17762810154314757', '0.16528291967792272', '0.1549394817364167', '0.14773785683307458', '0.14243397282387893', '0.13739505554247577', '0.1310535776277255', '0.10338231301359119', '0.0712576852660599', '0.06258988585555587', '0.05992343204271432', '0.05651626782614715', '0.05377438074898583', '0.050775328858603766', '0.04705750996628718', '0.04567420612948961', '0.044906720694239434', '0.0398077767210496', '0.03164183754505387', '0.023055732945877462', '0.017014997655336858', '0.01540542914325149', '0.018304333254449443', '0.02265291811877184', '0.02358665102764227', '0.011322439037005992', '1.0665566175146088e-05', '-5.3373772596991026e-06', '1.0672916849474568e-05']
============================================================
Property calculation output:


Summary of computed properties:
{'surface_decohesion_unrelaxed_energy': ['0.0', '0.002090838147415329', '0.009252771135886555', '0.020829748946612898', '0.03599547513505541', '0.0536592018490978', '0.07236001128810468', '0.09063726750810092', '0.10778031582482901', '0.12376057624114269', '0.13887293927338454', '0.15337140563756252', '0.16736856606242', '0.1808069980582795', '0.19286828869798572', '0.20133501522321778', '0.20790172002909854', '0.21405303724758434', '0.21986171609085053', '0.2253784667174607', '0.23060802008020706', '0.2355095735891169', '0.24009733924198187', '0.24466494209506642', '0.248934301429565', '0.25252426426584945', '0.2552486634244698', '0.25722025649864616', '0.258799368514819', '0.2604516247480726', '0.26250855785747973', '0.26486837997331186', '0.26678595656635784', '0.26716461573137323', '0.26716461536383945', '0.26716461536383945'], 'surface_decohesion_unrelaxed_opening': [0.0, 0.09999999999999999, 0.19999999999999998, 0.3, 0.39999999999999997, 0.5, 0.6, 0.7000000000000001, 0.7999999999999999, 0.8999999999999999, 1.0, 1.1, 1.2, 1.3, 1.4000000000000001, 1.5, 1.5999999999999999, 1.7, 1.7999999999999998, 1.9, 2.0, 2.1, 2.2, 2.3, 2.4, 2.5, 2.6, 2.7, 2.8000000000000003, 2.9000000000000004, 3.0, 3.0999999999999996, 3.1999999999999997, 3.3, 3.4, 3.5], 'surface_decohesion_unrelaxed_stress': ['-0.006524134476279037', '0.047302376552009195', '0.094897762344839', '0.13527389804456197', '0.16628776545197865', '0.18445862722207013', '0.18681381025121874', '0.17762810154314757', '0.16528291967792272', '0.1549394817364167', '0.14773785683307458', '0.14243397282387893', '0.13739505554247577', '0.1310535776277255', '0.10338231301359119', '0.0712576852660599', '0.06258988585555587', '0.05992343204271432', '0.05651626782614715', '0.05377438074898583', '0.050775328858603766', '0.04705750996628718', '0.04567420612948961', '0.044906720694239434', '0.0398077767210496', '0.03164183754505387', '0.023055732945877462', '0.017014997655336858', '0.01540542914325149', '0.018304333254449443', '0.02265291811877184', '0.02358665102764227', '0.011322439037005992', '1.0665566175146088e-05', '-5.3373772596991026e-06', '1.0672916849474568e-05']}
============================================================
