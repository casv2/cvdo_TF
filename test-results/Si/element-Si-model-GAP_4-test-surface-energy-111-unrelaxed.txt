Model GAP_4, Test surface-energy-111-unrelaxed
Test run at 2018-10-18 20:55

model file: ../../../models/Si/GAP_4/model.py
============================================================
import os

from quippy import Potential

orig_dir = os.getcwd()
model_dir = os.path.dirname(__file__)
os.chdir(model_dir)
try:
    calculator = Potential(init_args='Potential xml_label="GAP_2014_11_7_0_0_38_2_147"', param_filename='gp_soap_all_12_10_0.5_4_5.0_8500.xml')
finally:
    os.chdir(orig_dir)

no_checkpoint = True

name = 'GAP_2014_11_7_0_0_38_2_147'
============================================================
test file: ../../../tests/Si/surface-energy-111-unrelaxed/test.py
============================================================
# This script defines a test case which computes one or more physical
# properties with a given model
#
# INPUTS:
#   model.calculator -- an ase.calculator.Calculator instance
#     this script can assume the calculator is checkpointed.
#
# OUTPUTS:
#   properties -- dictionary of key/value pairs corresponding
#     to physical quantities computed by this test

# standard ASE structure generation routines
from ase.lattice.cubic import Diamond
import numpy as np

import ase.io, sys

# set of utility routines specific this this model/testing framework
from utilities import relax_atoms, relax_atoms_cell

# the current model
import model

a0 = 5.44 # initial guess at lattice constant, cell will be relaxed below
fmax = 0.01 # maximum force following relaxtion [eV/A]

# set up the a
bulk = Diamond(symbol='Si', latticeconstant=a0, directions=[[1,-1,0],[1,0,-1],[1,1,1]])

# specify that we will use model.calculator to compute forces, energies and stresses
bulk.set_calculator(model.calculator)

# use one of the routines from utilities module to relax the initial
# unit cell and atomic positions
bulk = relax_atoms_cell(bulk, tol=fmax, traj_file=None)

# set up supercell
bulk *= (1, 1, 10)


def surface_energy(bulk, z_offset):
    Nat = bulk.get_number_of_atoms()

    # shift so cut is through shuffle plane
    bulk.positions[:,2] += z_offset
    bulk.wrap()

    # relax atom positions, holding cell fixed
    # vac = relax_atoms(vac, fmax=fmax)

    # compute surface formation energy as difference of bulk and expanded cell
    ebulk = bulk.get_potential_energy()
    print 'bulk cell energy', ebulk

    bulk.cell[2,:] += [0.0,0.0,10.0]
    eexp  = bulk.get_potential_energy()

    ase.io.write(sys.stdout, bulk, format='extxyz')

    print 'expanded cell energy', eexp
    e_form = 0.5*(eexp - ebulk) / np.linalg.norm(np.cross(bulk.cell[0,:],bulk.cell[1,:]))
    print 'unrelaxed 111 surface formation energy', e_form
    return e_form

# dictionary of computed properties - this is output of this test, to
#   be compared with other models
properties = {'surface_energy_111_unrelaxed':
                surface_energy(bulk, 2.0) }
============================================================
relax_atoms_cell using method cg_n
WARNING:quippy.potential:Minim atoms is not quippy.Atoms instance, copy forced!
bulk cell energy -9790.64244343
60
Lattice="3.8598779102985734 1.2714914048923222e-16 1.2358132649626846e-17 1.9299389551492867 3.342752325824957 8.69875338517715e-16 -8.873074678690453e-16 1.4929676594866318e-14 104.54731349671718" Properties=species:S:1:pos:R:3:Z:I:1 energy=-9788.21551918 Minim_Constant_Volume=F Minim_Hydrostatic_Strain=F pbc="T T T"
Si       0.00000000       0.00000000       2.00000000       14 
Si       0.00000000      -0.00000000       4.36368284       14 
Si       1.92993896       1.11425078       8.30315423       14 
Si       1.92993896       1.11425078      10.66683707       14 
Si       3.85987791       2.22850155       5.15157712       14 
Si       3.85987791       2.22850155       7.51525995       14 
Si       0.00000000       0.00000000      11.45473135       14 
Si       0.00000000      -0.00000000      13.81841419       14 
Si       1.92993896       1.11425078      17.75788558       14 
Si       1.92993896       1.11425078      20.12156842       14 
Si       3.85987791       2.22850155      14.60630847       14 
Si       3.85987791       2.22850155      16.96999130       14 
Si       0.00000000       0.00000000      20.90946270       14 
Si       0.00000000       0.00000000      23.27314554       14 
Si       1.92993896       1.11425078      27.21261693       14 
Si       1.92993896       1.11425078      29.57629977       14 
Si       3.85987791       2.22850155      24.06103982       14 
Si       3.85987791       2.22850155      26.42472265       14 
Si       0.00000000       0.00000000      30.36419405       14 
Si       0.00000000       0.00000000      32.72787689       14 
Si       1.92993896       1.11425078      36.66734828       14 
Si       1.92993896       1.11425078      39.03103112       14 
Si       3.85987791       2.22850155      33.51577117       14 
Si       3.85987791       2.22850155      35.87945400       14 
Si       0.00000000       0.00000000      39.81892540       14 
Si       0.00000000       0.00000000      42.18260824       14 
Si       1.92993896       1.11425078      46.12207963       14 
Si       1.92993896       1.11425078      48.48576247       14 
Si       3.85987791       2.22850155      42.97050252       14 
Si       3.85987791       2.22850155      45.33418535       14 
Si       0.00000000       0.00000000      49.27365675       14 
Si       0.00000000       0.00000000      51.63733959       14 
Si       1.92993896       1.11425078      55.57681098       14 
Si       1.92993896       1.11425078      57.94049382       14 
Si       3.85987791       2.22850155      52.42523386       14 
Si       3.85987791       2.22850155      54.78891670       14 
Si       0.00000000       0.00000000      58.72838810       14 
Si       0.00000000       0.00000000      61.09207094       14 
Si       1.92993896       1.11425078      65.03154233       14 
Si       1.92993896       1.11425078      67.39522517       14 
Si       3.85987791       2.22850155      61.87996521       14 
Si       3.85987791       2.22850155      64.24364805       14 
Si       0.00000000       0.00000000      68.18311945       14 
Si       0.00000000       0.00000000      70.54680229       14 
Si       1.92993896       1.11425078      74.48627368       14 
Si       1.92993896       1.11425078      76.84995652       14 
Si       3.85987791       2.22850155      71.33469656       14 
Si       3.85987791       2.22850155      73.69837940       14 
Si       0.00000000       0.00000000      77.63785080       14 
Si       0.00000000       0.00000000      80.00153363       14 
Si       1.92993896       1.11425078      83.94100503       14 
Si       1.92993896       1.11425078      86.30468787       14 
Si       3.85987791       2.22850155      80.78942791       14 
Si       3.85987791       2.22850155      83.15311075       14 
Si       0.00000000       0.00000000      87.09258215       14 
Si       0.00000000       0.00000000      89.45626498       14 
Si       1.92993896       1.11425078      93.39573638       14 
Si       1.92993896       1.11425078       1.21210572       14 
Si       3.85987791       2.22850155      90.24415926       14 
Si       3.85987791       2.22850155      92.60784210       14 
expanded cell energy -9788.21551918
unrelaxed 111 surface formation energy 0.09404776029565082
============================================================
Property calculation output:


Summary of computed properties:
{'surface_energy_111_unrelaxed': '0.09404776029565082'}
============================================================
